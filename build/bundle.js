var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function a(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function s(t){return document.createTextNode(t)}function f(){return s(" ")}function h(){return s("")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}function p(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let w;function _(t){w=t}function $(t){(function(){if(!w)throw new Error("Function called outside component initialization");return w})().$$.on_mount.push(t)}const b=[],x=[],k=[],Z=[],M=Promise.resolve();let y=!1;function V(t){k.push(t)}const A=new Set;let C=0;function E(){const t=w;do{for(;C<b.length;){const t=b[C];C++,_(t),T(t.$$)}for(_(null),b.length=0,C=0;x.length;)x.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];A.has(e)||(A.add(e),e())}k.length=0}while(b.length);for(;Z.length;)Z.pop()();y=!1,A.clear(),_(t)}function T(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(V)}}const H=new Set;function S(t,e){-1===t.$$.dirty[0]&&(b.push(t),y||(y=!0,M.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(r,i,l,u,d,s,f,h=[-1]){const m=w;_(r);const v=r.$$={fragment:null,ctx:null,props:s,update:t,not_equal:d,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(m?m.$$.context:[])),callbacks:n(),dirty:h,skip_bound:!1,root:i.target||m.$$.root};f&&f(v.root);let g=!1;if(v.ctx=l?l(r,i.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return v.ctx&&d(v.ctx[t],v.ctx[t]=o)&&(!v.skip_bound&&v.bound[t]&&v.bound[t](o),g&&S(r,t)),e})):[],v.update(),g=!0,o(v.before_update),v.fragment=!!u&&u(v.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);v.fragment&&v.fragment.l(t),t.forEach(c)}else v.fragment&&v.fragment.c();i.intro&&((p=r.$$.fragment)&&p.i&&(H.delete(p),p.i($))),function(t,n,r,i){const{fragment:l,on_mount:c,on_destroy:u,after_update:d}=t.$$;l&&l.m(n,r),i||V((()=>{const n=c.map(e).filter(a);u?u.push(...n):o(n),t.$$.on_mount=[]})),d.forEach(V)}(r,i.target,i.anchor,i.customElement),E()}var p,$;_(m)}function N(t,e,n){const o=t.slice();return o[17]=e[n],o[18]=e,o[19]=n,o}function L(t){let e,n,o;function a(t,e){return t[1]?j:G}let r=a(t),i=r(t);return{c(){e=u("button"),i.c(),v(e,"class","pause_resume")},m(a,r){l(a,e,r),i.m(e,null),n||(o=m(e,"click",t[8]),n=!0)},p(t,n){r!==(r=a(t))&&(i.d(1),i=r(t),i&&(i.c(),i.m(e,null)))},d(t){t&&c(e),i.d(),n=!1,o()}}}function G(t){let e,n;return{c(){e=d("svg"),n=d("path"),v(n,"fill","currentColor"),v(n,"d","M200 34h-36a14 14 0 0 0-14 14v160a14 14 0 0 0 14 14h36a14 14 0 0 0 14-14V48a14 14 0 0 0-14-14Zm2 174a2 2 0 0 1-2 2h-36a2 2 0 0 1-2-2V48a2 2 0 0 1 2-2h36a2 2 0 0 1 2 2ZM92 34H56a14 14 0 0 0-14 14v160a14 14 0 0 0 14 14h36a14 14 0 0 0 14-14V48a14 14 0 0 0-14-14Zm2 174a2 2 0 0 1-2 2H56a2 2 0 0 1-2-2V48a2 2 0 0 1 2-2h36a2 2 0 0 1 2 2Z"),v(e,"width","32"),v(e,"height","32"),v(e,"viewBox","0 0 256 256")},m(t,o){l(t,e,o),i(e,n)},d(t){t&&c(e)}}}function j(t){let e,n;return{c(){e=d("svg"),n=d("path"),v(n,"fill","currentColor"),v(n,"d","M80 230a14.1 14.1 0 0 1-14-14V40a14 14 0 0 1 21.3-11.9l144 88a13.9 13.9 0 0 1 0 23.8l-144 88A14 14 0 0 1 80 230Zm0-192a1.5 1.5 0 0 0-1 .3a1.8 1.8 0 0 0-1 1.7v176a1.8 1.8 0 0 0 1 1.7a2 2 0 0 0 2 0l144-88a1.9 1.9 0 0 0 0-3.4l-144-88a1.9 1.9 0 0 0-1-.3Z"),v(e,"width","32"),v(e,"height","32"),v(e,"viewBox","0 0 256 256")},m(t,o){l(t,e,o),i(e,n)},d(t){t&&c(e)}}}function D(t){let e,n;return{c(){e=d("svg"),n=d("path"),v(n,"fill","currentColor"),v(n,"d","M128 24a104 104 0 1 0 104 104A104.2 104.2 0 0 0 128 24Zm0 192a88 88 0 1 1 88-88a88.1 88.1 0 0 1-88 88Zm0-160a72 72 0 1 0 72 72a72.1 72.1 0 0 0-72-72Zm0 128a56 56 0 1 1 56-56a56 56 0 0 1-56 56Z"),v(e,"width","32"),v(e,"height","32"),v(e,"viewBox","0 0 256 256")},m(t,o){l(t,e,o),i(e,n)},d(t){t&&c(e)}}}function O(t){let e,n;return{c(){e=d("svg"),n=d("path"),v(n,"fill","currentColor"),v(n,"d","M197.1 212H58.9A14.9 14.9 0 0 1 44 197.1V58.9A14.9 14.9 0 0 1 58.9 44h138.2A14.9 14.9 0 0 1 212 58.9v138.2a14.9 14.9 0 0 1-14.9 14.9ZM60 196h136V60H60Z"),v(e,"width","32"),v(e,"height","32"),v(e,"viewBox","0 0 256 256")},m(t,o){l(t,e,o),i(e,n)},d(t){t&&c(e)}}}function q(t){let e,n=t[0],o=[];for(let e=0;e<n.length;e+=1)o[e]=J(N(t,n,e));return{c(){e=u("div");for(let t=0;t<o.length;t+=1)o[t].c();v(e,"class","track_list")},m(t,n){l(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,a){if(129&a){let r;for(n=t[0],r=0;r<n.length;r+=1){const i=N(t,n,r);o[r]?o[r].p(i,a):(o[r]=J(i),o[r].c(),o[r].m(e,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(t){t&&c(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(o,t)}}}function z(t){let e;function n(t,e){return t[17].enabled?P:I}let o=n(t),a=o(t);return{c(){a.c(),e=h()},m(t,n){a.m(t,n),l(t,e,n)},p(t,r){o!==(o=n(t))&&(a.d(1),a=o(t),a&&(a.c(),a.m(e.parentNode,e)))},d(t){a.d(t),t&&c(e)}}}function F(t){let e;function n(t,e){return t[17].enabled?W:U}let o=n(t),a=o(t);return{c(){a.c(),e=h()},m(t,n){a.m(t,n),l(t,e,n)},p(t,r){o!==(o=n(t))&&(a.d(1),a=o(t),a&&(a.c(),a.m(e.parentNode,e)))},d(t){a.d(t),t&&c(e)}}}function I(t){let e,n;return{c(){e=d("svg"),n=d("path"),v(n,"fill","currentColor"),v(n,"d","m213.9 210.6l-160-176a8 8 0 0 0-11.8 10.8L80 87.1V128a48 48 0 0 0 73.9 40.4l10.9 12a64 64 0 0 1-100.4-45.3a8 8 0 1 0-15.9 1.8a79.9 79.9 0 0 0 71.5 70.7V232a8 8 0 0 0 16 0v-24.4a79.2 79.2 0 0 0 39.6-15.3l26.5 29.1a8 8 0 0 0 5.9 2.6a8.2 8.2 0 0 0 5.4-2.1a7.9 7.9 0 0 0 .5-11.3ZM128 160a32.1 32.1 0 0 1-32-32v-23.3l46.9 51.6A31.6 31.6 0 0 1 128 160ZM87.2 38.8A47.5 47.5 0 0 1 128 16a48 48 0 0 1 48 48v60.4a8 8 0 0 1-16 0V64a32.1 32.1 0 0 0-32-32a31.7 31.7 0 0 0-27.2 15.2a8.1 8.1 0 0 1-11.1 2.6a8 8 0 0 1-2.5-11Zm100.4 112.5a60.1 60.1 0 0 0 4-16.2a8 8 0 1 1 15.9 1.8a78.7 78.7 0 0 1-5 20.2a7.8 7.8 0 0 1-7.4 5.1a9.3 9.3 0 0 1-2.9-.5a8.1 8.1 0 0 1-4.6-10.4Z"),v(e,"width","32"),v(e,"height","32"),v(e,"viewBox","0 0 256 256")},m(t,o){l(t,e,o),i(e,n)},d(t){t&&c(e)}}}function P(t){let e,n;return{c(){e=d("svg"),n=d("path"),v(n,"fill","currentColor"),v(n,"d","M128 176a48 48 0 0 0 48-48V64a48 48 0 0 0-96 0v64a48 48 0 0 0 48 48ZM96 64a32 32 0 0 1 64 0v64a32 32 0 0 1-64 0Zm111.5 72.9a79.9 79.9 0 0 1-71.5 70.7V232a8 8 0 0 1-16 0v-24.4a79.9 79.9 0 0 1-71.5-70.7a8 8 0 1 1 15.9-1.8a64 64 0 0 0 127.2 0a8 8 0 1 1 15.9 1.8Z"),v(e,"width","32"),v(e,"height","32"),v(e,"viewBox","0 0 256 256")},m(t,o){l(t,e,o),i(e,n)},d(t){t&&c(e)}}}function U(t){let e,n;return{c(){e=d("svg"),n=d("path"),v(n,"fill","currentColor"),v(n,"d","M244 73.1a7.7 7.7 0 0 0-8 0l-44 25.1V68a16 16 0 0 0-16-16h-65.1a8 8 0 0 0 0 16H176v76a7.8 7.8 0 0 0 4 6.9l56 32a8.3 8.3 0 0 0 4 1.1a8 8 0 0 0 4-1.1a7.8 7.8 0 0 0 4-6.9V80a7.8 7.8 0 0 0-4-6.9Zm-12 89.1l-40-22.8v-22.8l40-22.8ZM40.8 18.6a7.9 7.9 0 0 0-11.3-.5a8 8 0 0 0-.5 11.3L49.6 52H24A16 16 0 0 0 8 68v120a16 16 0 0 0 16 16h152a15.9 15.9 0 0 0 9.1-2.9l33 36.3a8 8 0 0 0 5.9 2.6a8.2 8.2 0 0 0 5.4-2.1a7.9 7.9 0 0 0 .5-11.3ZM24 188V68h40.1l109.1 120Z"),v(e,"width","32"),v(e,"height","32"),v(e,"viewBox","0 0 256 256")},m(t,o){l(t,e,o),i(e,n)},d(t){t&&c(e)}}}function W(t){let e,n;return{c(){e=d("svg"),n=d("path"),v(n,"fill","currentColor"),v(n,"d","M244 73.1a7.7 7.7 0 0 0-8 0l-44 25.1V92a40 40 0 0 0-40-40H24A16 16 0 0 0 8 68v96a40 40 0 0 0 40 40h128a16 16 0 0 0 16-16v-30.2l44 25.1a8.3 8.3 0 0 0 4 1.1a8 8 0 0 0 4-1.1a7.8 7.8 0 0 0 4-6.9V80a7.8 7.8 0 0 0-4-6.9ZM176 188H48a24.1 24.1 0 0 1-24-24V68h128a24.1 24.1 0 0 1 24 24v96Zm56-25.8l-40-22.8v-22.8l40-22.8Z"),v(e,"width","32"),v(e,"height","32"),v(e,"viewBox","0 0 256 256")},m(t,o){l(t,e,o),i(e,n)},d(t){t&&c(e)}}}function J(t){let e,n,a,r,d,h,g,p,w,_,$,b=t[17].label+"";function x(t,e){return"video"===t[17].kind?F:"audio"===t[17].kind?z:void 0}let k=x(t),Z=k&&k(t);function M(){return t[10](t[17],t[18],t[19])}function y(){return t[11](t[17])}return{c(){e=u("div"),n=u("span"),a=s(b),r=f(),d=u("div"),h=u("button"),Z&&Z.c(),g=f(),p=u("button"),p.innerHTML='<svg width="32" height="32" viewBox="0 0 256 256"><path fill="currentColor" d="M197.1 212H58.9A14.9 14.9 0 0 1 44 197.1V58.9A14.9 14.9 0 0 1 58.9 44h138.2A14.9 14.9 0 0 1 212 58.9v138.2a14.9 14.9 0 0 1-14.9 14.9ZM60 196h136V60H60Z"></path></svg>',w=f(),v(n,"class","title"),v(h,"class","pause_resume"),v(p,"class","stop"),v(d,"class","buttons"),v(e,"class","track")},m(t,o){l(t,e,o),i(e,n),i(n,a),i(e,r),i(e,d),i(d,h),Z&&Z.m(h,null),i(d,g),i(d,p),i(e,w),_||($=[m(h,"click",M),m(p,"click",y)],_=!0)},p(e,n){t=e,1&n&&b!==(b=t[17].label+"")&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(a,b),k===(k=x(t))&&Z?Z.p(t,n):(Z&&Z.d(1),Z=k&&k(t),Z&&(Z.c(),Z.m(h,null)))},d(t){t&&c(e),Z&&Z.d(),_=!1,o($)}}}function K(e){let n,a,r,d,s,h,p,w,_,$,b,x,k,Z,M,y,A,C,E,T,H=e[4]&&L(e);function S(t,e){return t[4]?O:D}let B=S(e),N=B(e),G=e[4]&&q(e);return{c(){n=u("div"),a=u("div"),H&&H.c(),r=f(),d=u("button"),N.c(),s=f(),G&&G.c(),h=f(),p=u("div"),w=u("h2"),w.textContent="Video device",_=f(),$=u("select"),b=u("option"),b.textContent="Screen",x=u("option"),x.textContent="Webcam",k=f(),Z=u("h2"),Z.textContent="Audio device",M=f(),y=u("select"),A=u("option"),A.textContent="System audio",C=u("option"),C.textContent="Mic audio",v(a,"class","start_stop"),b.__value="screen",b.value=b.__value,x.__value="camera",x.value=x.__value,void 0===e[2]&&V((()=>e[12].call($))),A.__value="system",A.value=A.__value,C.__value="microphone",C.value=C.__value,void 0===e[3]&&V((()=>e[13].call(y))),v(p,"class","select"),v(n,"class","container")},m(t,o){l(t,n,o),i(n,a),H&&H.m(a,null),i(a,r),i(a,d),N.m(d,null),i(n,s),G&&G.m(n,null),i(n,h),i(n,p),i(p,w),i(p,_),i(p,$),i($,b),i($,x),g($,e[2]),i(p,k),i(p,Z),i(p,M),i(p,y),i(y,A),i(y,C),g(y,e[3]),E||(T=[m(d,"click",e[9]),m($,"change",e[12]),m(y,"change",e[13])],E=!0)},p(t,[e]){t[4]?H?H.p(t,e):(H=L(t),H.c(),H.m(a,r)):H&&(H.d(1),H=null),B!==(B=S(t))&&(N.d(1),N=B(t),N&&(N.c(),N.m(d,null))),t[4]?G?G.p(t,e):(G=q(t),G.c(),G.m(n,h)):G&&(G.d(1),G=null),4&e&&g($,t[2]),8&e&&g(y,t[3])},i:t,o:t,d(t){t&&c(n),H&&H.d(),N.d(),G&&G.d(),E=!1,o(T)}}}function Q(t,e,n){let o,a,r,i,l=[],c=!1,u="screen",d="system",s=!1;async function f(){let t={video:!1,audio:!1},e={video:!1,audio:!1};if("screen"===u&&(t.video=!0),"camera"===u&&(e.video=!0),"system"===d&&(t.audio=!0),"microphone"===d&&(e.audio=!0),e.audio||e.video){console.log("Getting from external",e);let t=await navigator.mediaDevices.getUserMedia(e);if(n(0,l=[...l,...t.getTracks()]),console.log("Got stream"),e.audio){let e=t.getAudioTracks();if(!e.length)throw new Error("No audio stream found");a=new MediaStream(e)}if(e.video){let e=t.getVideoTracks();if(!e.length)throw new Error("No video stream found");o=new MediaStream(e)}}if(t.audio||t.video){console.log("Getting from screen",t);let e=await navigator.mediaDevices.getDisplayMedia(t);if(n(0,l=[...l,...e.getTracks()]),console.log("Got stream"),t.audio){let t=e.getAudioTracks();if(!t.length)throw new Error("No audio stream found");a=new MediaStream(t)}if(t.video){let t=e.getVideoTracks();if(!t.length)throw new Error("No video stream found");o=new MediaStream(t)}}r=new MediaStream([...o.getTracks(),...a.getTracks()]),l.forEach((t=>{t.onended=()=>{console.log("Track ended: ",t)}})),n(1,c=!1),n(4,s=!0)}function h(t){if(!l.includes(t))throw new Error("Couldn't find track in list");n(0,l=l.filter((e=>e!==t))),r.removeTrack(t)}$((()=>{}));return[l,c,u,d,s,i,f,h,()=>"paused"===i.state?i.resume():"recording"===i.state&&i.pause(),()=>s?void 0:f(),(t,e,o)=>n(0,e[o].enabled=!t.enabled,l),t=>h(t),function(){u=p(this),n(2,u)},function(){d=p(this),n(3,d)}]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),B(this,t,Q,K,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
